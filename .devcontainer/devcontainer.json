// .devcontainer/devcontainer.json
{
    "name": "PSItems (PowerShell 7)",
    // Build from local Dockerfile for reproducibility (pin in Dockerfile)
    "dockerFile": "Dockerfile",
    // VS Code customizations inside the container
    "customizations": {
        "vscode": {
            // Move editor/terminal settings here (recommended schema)
            "settings": {
                // Use PowerShell as the default integrated terminal on Linux
                "terminal.integrated.defaultProfile.linux": "pwsh",
                // Optional: keep PowerShell extension console from popping up on start
                "powershell.integratedConsole.showOnStartup": false
            },
            // Recommended extensions
            "extensions": [
                "ms-vscode.powershell",
                "davidanson.vscode-markdownlint"
            ]
        }
    },
    // Bootstrap module dependencies on first create (kept light)
    "postCreateCommand": "pwsh -NoProfile -Command \"./build.ps1 -Bootstrap\"",
    // Run as the non-root user created in the Dockerfile
    "remoteUser": "vscode",
    // Small quality-of-life env inside the container
    "containerEnv": {
        "POWERSHELL_TELEMETRY_OPTOUT": "1",
        "POWERSHELL_UPDATECHECK": "Off"
    }
}
